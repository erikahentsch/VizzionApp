(this["webpackJsonpvizzion-client"]=this["webpackJsonpvizzion-client"]||[]).push([[0],{84:function(e,t,a){e.exports=a(96)},89:function(e,t,a){},90:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},91:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(11),i=a.n(r),l=(a(89),a(14)),c=(a(90),a(91),a(39)),s=a(158),d=a(144),u=a(98),g=a(148),p=a(159),m=a(150),h=a(151),f=a(152),b=a(136);a(141),a(139),a(97),a(142),a(143),a(67),a(68),Object(b.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},nested:{paddingLeft:e.spacing(4)}}}));a(145),a(147),a(156),Object(b.a)((function(e){return{formControl:{minWidth:120},regionButton:{paddingLeft:20}}}));var x=Object(b.a)((function(e){return{root:{display:"flex"},drawer:{width:240,flexShrink:0,display:"flex",flexDirection:"column",position:"relative"},drawerPaper:{width:240},drawerTitle:{fontSize:"24px",fontWeight:"bold",padding:"10px"},drawerBody:{padding:"0px 10px"},buttonGroup:{padding:"20px 0px",display:"flex",alignContent:"space-between","& button":{flexGrow:1}},drawerToggle:{display:"flex",alignItems:"center",position:"absolute",right:0,top:5,radius:"5px",backgroundColor:"white",zIndex:10,boxShadow:"0px 2px 1px -1px rgba(0,0,0,0.2)"},content:{flexGrow:1,position:"relative",transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginRight:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0},tooltip:{display:"flex",flexDirection:"column",width:"300px","& img":{height:"auto",maxWidth:"300px"}}}})),E=function(e){var t=x();return o.a.createElement(s.a,{className:t.drawer,variant:"persistent",anchor:"right",open:e.open,classes:{paper:t.drawerPaper}},o.a.createElement("div",{className:t.drawerTitle},"Toolbar"),o.a.createElement("div",{className:t.drawerBody},o.a.createElement(d.a,{margin:"normal"},o.a.createElement(u.a,null,"Change Search Area"),o.a.createElement(g.a,{label:"Toggle Area Edit",control:o.a.createElement(p.a,{checked:e.editSwitch,onChange:e.handleSwitch,name:"checkedA",inputProps:{"aria-label":"secondary checkbox"}})}),o.a.createElement(m.a,null,"Select two points to create new search rectangle"),o.a.createElement(h.a,{className:t.buttonGroup,row:!0},o.a.createElement(f.a,{onClick:e.handleUpdate,variant:"contained",color:"primary"},"Update"),o.a.createElement(f.a,{onClick:e.handleClear,variant:"contained"},"Clear")),o.a.createElement(h.a,null,o.a.createElement(f.a,{variant:"contained",color:"secondary",onClick:e.downloadContent},"Export")))))},v=a(160),w=a(161),O=a(153),j=a(154),S=a(162),y=a(155),k=a(3),C=a(13),N=a.n(C),D=a(149),A=a(69),z=a.n(A),T=a(70),R=a.n(T),B=Object(b.a)((function(e){return{root:{display:"flex"},drawer:{width:240,flexShrink:0,display:"flex",flexDirection:"column",position:"relative"},drawerPaper:{width:240},drawerTitle:{fontSize:"24px",fontWeight:"bold",padding:"10px"},drawerBody:{padding:"0px 10px"},buttonGroup:{padding:"20px 0px",display:"flex",alignContent:"space-between","& button":{flexGrow:1}},drawerToggle:{display:"flex",alignItems:"center",position:"absolute",right:0,top:5,radius:"5px",backgroundColor:"white",zIndex:10,boxShadow:"0px 2px 1px -1px rgba(0,0,0,0.2)"},content:{flexGrow:1,position:"relative",transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginRight:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0},tooltip:{display:"flex",flexDirection:"column",width:"300px","& img":{height:"auto",maxWidth:"300px"}}}})),I=N.a.icon({iconUrl:"camera.png",iconAnchor:[16,16],popupAnchor:[-3,-16]}),U=N.a.icon({iconUrl:"hotspot_camera.png",iconAnchor:[16,16],popupAnchor:[-3,-16]}),W=(N.a.circle({color:"red",fillColor:"red",opacity:.75,radius:5e3}),function(e){var t=Object(n.useState)({lat:43.6475,long:-79.3811,zoom:13}),a=Object(l.a)(t,2),r=a[0],i=(a[1],Object(n.useState)([])),s=Object(l.a)(i,2),d=s[0],u=s[1],g=Object(n.useState)(!0),p=Object(l.a)(g,2),m=p[0],h=p[1],b=Object(n.useState)(!1),x=Object(l.a)(b,2),C=x[0],N=x[1],A=Object(n.useState)(!1),T=Object(l.a)(A,2),W=T[0],G=T[1],L=Object(n.useState)(!1),M=Object(l.a)(L,2),P=(M[0],M[1],Object(n.useState)(!1)),F=Object(l.a)(P,2),J=(F[0],F[1],B()),$=function(){N(!C)},_=function(){2===d.length&&(e.handleNewRectangle(d),u([]))};var q=function(){console.log("load"),document.getElementById("imageDiv").style.display="inherit"};return o.a.createElement("div",{className:J.root},e.loading&&o.a.createElement("div",{className:"spinnerDiv"},o.a.createElement("div",{className:"spinnerText"},"Loading Cameras"),o.a.createElement("div",{className:"spinner"},o.a.createElement("div",{className:"double-bounce1"}),o.a.createElement("div",{className:"double-bounce2"}))),e.error&&o.a.createElement("div",{className:"spinnerDiv"},o.a.createElement("div",{className:"spinnerText"},e.errorMessage)),o.a.createElement("div",{className:Object(k.a)(J.content,Object(c.a)({},J.contentShift,C))},o.a.createElement("div",{onClick:$,className:J.drawerToggle},o.a.createElement(D.a,{onClick:$},C?o.a.createElement(R.a,null):o.a.createElement(z.a,null))),o.a.createElement(v.a,{onClick:function(e){if(console.log(e),m){var t=[e.latlng.lat.toFixed(3),e.latlng.lng.toFixed(3)];if(console.log(t),0===d.length)u([t]);else if(1===d.length){var a=d[0];console.log(a,t),u([a,t])}else 2!==d.length||W?W&&G(!1):u([t])}},height:100,center:[r.lat,r.long],zoom:r.zoom},o.a.createElement(w.a,{style:{cursor:m&&"pointer !important"},attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),2===e.searchArea.length&&o.a.createElement(O.a,{color:"purple",bounds:e.searchArea}),1===d.length&&o.a.createElement(j.a,{color:"red",opacity:1,radius:2,center:d[0]}),2===d.length&&o.a.createElement(O.a,{onClick:function(e){G(!0),console.log("click rectangle",e)},color:"red",bounds:d},o.a.createElement(S.a,null,o.a.createElement(f.a,{onClick:_},"Update Search"))),e.cameras&&e.cameras.map((function(e){return o.a.createElement(y.a,{key:e.id,position:[e.lat,e.long],icon:e.hotspot?U:I},o.a.createElement(S.a,null,o.a.createElement("div",{className:J.tooltip},o.a.createElement("div",{id:"imageDiv",style:{display:"none"}},o.a.createElement("img",{onError:function(e){e.target.onError=null,e.target.src="/NoImage"},onLoad:q,src:"/image/".concat(e.id)})),o.a.createElement("div",null,o.a.createElement("strong",null,"ID: "),e.id),o.a.createElement("div",null,o.a.createElement("strong",null,"Name: "),e.name))))})))),o.a.createElement(E,{open:C,editSwitch:m,handleSwitch:function(e){h(!m)},handleUpdate:_,handleClear:function(){u([]),e.handleReset()},downloadContent:function(){try{var t=document.createElement("a"),a="";e.cameras.map((function(e){return a+=e.id+"\n"}));var n=new Blob([a],{type:"text/plain"});t.href=URL.createObjectURL(n),t.download="cameraList",t.click()}catch(o){console.log("Error Exporting Data")}},regionData:e.regionData}))});var G=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(!0),c=Object(l.a)(i,2),s=c[0],d=c[1],u=Object(n.useState)([]),g=Object(l.a)(u,2),p=g[0],m=g[1],h=Object(n.useState)(!1),f=Object(l.a)(h,2),b=f[0],x=f[1],E=Object(n.useState)(null),v=Object(l.a)(E,2),w=v[0],O=v[1],j=Object(n.useState)(null),S=Object(l.a)(j,2),y=S[0],k=S[1];Object(n.useEffect)((function(){console.log("useEffect"),N(),C()}),[]);var C=function(){console.log("get regions"),fetch("/regions").then((function(e){if(e.ok)return e.json()})).then((function(e){k(e)}))},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log("get Data",e),r(null),O(null);var a="/api";""!=e&&(a="/api/".concat(e,",").concat(t)),console.log("/api/".concat(e,",").concat(t)),fetch(a).then((function(e){if(console.log(e),e.ok)return e.json();throw Error("".concat(e.statusText))})).then((function(e){console.log(e),r(e.cameraData),m(e.searchArea),d(!1)})).catch((function(e){console.log(e.message),x(!0),d(!1),"Not Found"===e.message?(console.log("this error"),O("No Cameras Available")):O("Error fetching data")}))};return o.a.createElement("div",{className:"App"},o.a.createElement(W,{handleReset:function(){x(null)},handleNewRectangle:function(e){console.log("App",e),d(!0),x(null),m(e),r(null),N(e[0],e[1])},cameras:a,searchArea:p,loading:s,error:b,errorMessage:w,regionData:y}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[84,1,2]]]);
//# sourceMappingURL=main.46630005.chunk.js.map