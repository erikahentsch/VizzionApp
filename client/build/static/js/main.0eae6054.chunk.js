(this["webpackJsonpvizzion-client"]=this["webpackJsonpvizzion-client"]||[]).push([[0],{56:function(e,t,a){e.exports=a(69)},61:function(e,t,a){},62:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},63:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(11),c=a.n(r),l=(a(61),a(16)),i=(a(62),a(63),a(44)),s=a(109),m=a(108),d=a(98),u=a(99),p=a(112),g=a(101),h=a(3),E=a(10),f=a.n(E),b=a(94),v=a(96),w=a(48),x=a.n(w),j=a(49),O=a.n(j),y=a(100),S=a(105),k=a(107),N=a(102),C=a(110),A=a(106),D=a(103),z=a(104),R=Object(b.a)((function(e){return{root:{display:"flex"},drawer:{width:240,flexShrink:0,display:"flex",flexDirection:"column",position:"relative"},drawerPaper:{width:240},drawerTitle:{fontSize:"24px",fontWeight:"bold",padding:"10px"},drawerBody:{padding:"0px 10px"},buttonGroup:{padding:"20px 0px",display:"flex",alignContent:"space-between","& button":{flexGrow:1}},drawerToggle:{display:"flex",alignItems:"center",position:"absolute",right:0,top:5,radius:"5px",backgroundColor:"white",zIndex:10,boxShadow:"0px 2px 1px -1px rgba(0,0,0,0.2)"},content:{flexGrow:1,position:"relative",transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginRight:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0},tooltip:{display:"flex",flexDirection:"column",width:"300px","& img":{height:"auto",maxWidth:"300px"}}}})),T=f.a.icon({iconUrl:"camera.png",iconAnchor:[16,16],popupAnchor:[-3,-16]}),B=f.a.icon({iconUrl:"hotspot_camera.png",iconAnchor:[16,16],popupAnchor:[-3,-16]}),I=(f.a.circle({color:"red",fillColor:"red",opacity:.75,radius:5e3}),function(e){var t=Object(n.useState)({lat:43.6475,long:-79.3811,zoom:13}),a=Object(l.a)(t,2),r=a[0],c=(a[1],Object(n.useState)([])),E=Object(l.a)(c,2),f=E[0],b=E[1],w=Object(n.useState)(!0),j=Object(l.a)(w,2),I=j[0],U=j[1],L=Object(n.useState)(!1),G=Object(l.a)(L,2),W=G[0],P=G[1],F=Object(n.useState)(!1),J=Object(l.a)(F,2),M=J[0],$=J[1],_=Object(n.useState)(!1),q=Object(l.a)(_,2),H=(q[0],q[1],Object(n.useState)(!1)),K=Object(l.a)(H,2),Q=(K[0],K[1],R()),V=function(){P(!W)},X=function(){2===f.length&&(e.handleNewRectangle(f),b([]))};var Y=function(){console.log("load"),document.getElementById("imageDiv").style.display="inherit"};return o.a.createElement("div",{className:Q.root},e.loading&&o.a.createElement("div",{className:"spinnerDiv"},o.a.createElement("div",{className:"spinnerText"},"Loading Cameras"),o.a.createElement("div",{className:"spinner"},o.a.createElement("div",{className:"double-bounce1"}),o.a.createElement("div",{className:"double-bounce2"}))),e.error&&o.a.createElement("div",{className:"spinnerDiv"},o.a.createElement("div",{className:"spinnerText"},"No Cameras Available")),o.a.createElement("div",{className:Object(h.a)(Q.content,Object(i.a)({},Q.contentShift,W))},o.a.createElement("div",{onClick:V,className:Q.drawerToggle},o.a.createElement(v.a,{onClick:V},W?o.a.createElement(O.a,null):o.a.createElement(x.a,null))),o.a.createElement(s.a,{onClick:function(e){if(console.log(e),I){var t=[e.latlng.lat.toFixed(3),e.latlng.lng.toFixed(3)];if(console.log(t),0===f.length)b([t]);else if(1===f.length){var a=f[0];console.log(a,t),b([a,t])}else 2!==f.length||M?M&&$(!1):b([t])}},height:100,center:[r.lat,r.long],zoom:r.zoom},o.a.createElement(m.a,{style:{cursor:I&&"pointer !important"},attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),2===e.searchArea.length&&o.a.createElement(d.a,{color:"purple",bounds:e.searchArea}),1===f.length&&o.a.createElement(u.a,{color:"red",opacity:1,radius:2,center:f[0]}),2===f.length&&o.a.createElement(d.a,{onClick:function(e){$(!0),console.log("click rectangle",e)},color:"red",bounds:f},o.a.createElement(p.a,null,o.a.createElement(y.a,{onClick:X},"Update Search"))),e.cameras&&e.cameras.map((function(e){return o.a.createElement(g.a,{key:e.id,position:[e.lat,e.long],icon:e.hotspot?B:T},o.a.createElement(p.a,null,o.a.createElement("div",{className:Q.tooltip},o.a.createElement("div",{id:"imageDiv",style:{display:"none"}},o.a.createElement("img",{onError:function(e){e.target.onError=null,e.target.src="/NoImage"},onLoad:Y,src:"/image/".concat(e.id)})),o.a.createElement("div",null,o.a.createElement("strong",null,"ID: "),e.id),o.a.createElement("div",null,o.a.createElement("strong",null,"Name: "),e.name))))})))),o.a.createElement(S.a,{className:Q.drawer,variant:"persistent",anchor:"right",open:W,classes:{paper:Q.drawerPaper}},o.a.createElement("div",{className:Q.drawerTitle},"Toolbar"),o.a.createElement("div",{className:Q.drawerBody},o.a.createElement(k.a,{margin:"normal"},o.a.createElement(N.a,null,"Change Search Area"),o.a.createElement(C.a,{label:"Toggle Area Edit",control:o.a.createElement(A.a,{checked:I,onChange:function(e){U(!I)},name:"checkedA",inputProps:{"aria-label":"secondary checkbox"}})}),o.a.createElement(D.a,null,"Select two points to create new search rectangle"),o.a.createElement(z.a,{className:Q.buttonGroup,row:!0},o.a.createElement(y.a,{onClick:X,variant:"contained",color:"primary"},"Update"),o.a.createElement(y.a,{onClick:function(){b([]),e.handleReset()},variant:"contained"},"Clear")),o.a.createElement(z.a,null,o.a.createElement(y.a,{variant:"contained",color:"secondary",onClick:function(){try{var t=document.createElement("a"),a="";e.cameras.map((function(e){return a+=e.id+"\n"}));var n=new Blob([a],{type:"text/plain"});t.href=URL.createObjectURL(n),t.download="cameraList",t.click()}catch(o){console.log("Error Exporting Data")}}},"Export"))))))});var U=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!0),i=Object(l.a)(c,2),s=i[0],m=i[1],d=Object(n.useState)([]),u=Object(l.a)(d,2),p=u[0],g=u[1],h=Object(n.useState)(!1),E=Object(l.a)(h,2),f=E[0],b=E[1];return Object(n.useEffect)((function(){return[fetch("/api").then((function(e){if(e.ok)return e.json();throw new Error})).then((function(e){console.log(e),r(e.cameraData),g(e.searchArea),m(!1)})).catch((function(e){b(!0),m(!1)}))]}),[]),o.a.createElement("div",{className:"App"},o.a.createElement(I,{handleReset:function(){b(null)},handleNewRectangle:function(e){var t,a;console.log("App",e),m(!0),b(null),g(e),r(null),t=e[0],a=e[1],console.log("get Data"),r(null),console.log("/api/".concat(t,",").concat(a)),fetch("/api/".concat(t,",").concat(a)).then((function(e){if(e.ok)return e.json();throw new Error})).then((function(e){console.log(e),r(e.cameraData),g(e.searchArea),m(!1)})).catch((function(e){b(!0),m(!1)}))},cameras:a,searchArea:p,loading:s,error:f}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[56,1,2]]]);
//# sourceMappingURL=main.0eae6054.chunk.js.map