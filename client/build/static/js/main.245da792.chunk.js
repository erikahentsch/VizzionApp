(this["webpackJsonpvizzion-client"]=this["webpackJsonpvizzion-client"]||[]).push([[0],{55:function(e,t,a){e.exports=a(68)},60:function(e,t,a){},61:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},62:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),c=a.n(o),i=(a(60),a(16)),l=(a(61),a(62),a(43)),s=a(107),m=a(110),d=a(105),p=a(97),u=a(109),g=a(3),h=a(11),E=a.n(h),b=a(93),f=a(95),v=a(47),x=a.n(v),w=a(48),O=a.n(w),j=a(102),y=a(104),S=a(98),N=a(106),k=a(103),C=a(99),A=a(100),z=a(101),D=Object(b.a)((function(e){return{root:{display:"flex"},drawer:{width:240,flexShrink:0,display:"flex",flexDirection:"column",position:"relative"},drawerPaper:{width:240},drawerTitle:{fontSize:"24px",fontWeight:"bold",padding:"10px"},drawerBody:{padding:"0px 10px"},buttonGroup:{padding:"20px 0px",display:"flex",alignContent:"space-between","& button":{flexGrow:1}},drawerToggle:{display:"flex",alignItems:"center",position:"absolute",right:0,top:5,radius:"5px",backgroundColor:"white",zIndex:10,boxShadow:"0px 2px 1px -1px rgba(0,0,0,0.2)"},content:{flexGrow:1,position:"relative",transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginRight:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0},tooltip:{display:"flex",flexDirection:"column",width:"300px","& img":{height:"auto",maxWidth:"300px"}}}})),T=E.a.icon({iconUrl:"camera.png",iconAnchor:[16,16],popupAnchor:[-3,-16]}),B=E.a.icon({iconUrl:"hotspot_camera.png",iconAnchor:[16,16],popupAnchor:[-3,-16]}),I=(E.a.circle({color:"red",fillColor:"red",opacity:.75,radius:5e3}),function(e){var t=Object(n.useState)({lat:43.6475,long:-79.3811,zoom:13}),a=Object(i.a)(t,2),o=a[0],c=(a[1],Object(n.useState)([])),h=Object(i.a)(c,2),E=h[0],b=h[1],v=Object(n.useState)(!0),w=Object(i.a)(v,2),I=w[0],R=w[1],L=Object(n.useState)(!1),U=Object(i.a)(L,2),G=U[0],W=U[1],P=Object(n.useState)(!1),F=Object(i.a)(P,2),J=F[0],M=F[1],$=Object(n.useState)(!1),_=Object(i.a)($,2),q=(_[0],_[1],Object(n.useState)(!1)),H=Object(i.a)(q,2),K=(H[0],H[1],D()),Q=function(){W(!G)};var V=function(){console.log("load"),document.getElementById("imageDiv").style.display="inherit"};return r.a.createElement("div",{className:K.root},e.loading&&r.a.createElement("div",{className:"spinnerDiv"},r.a.createElement("div",{className:"spinnerText"},"Loading Cameras"),r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{className:"double-bounce1"}),r.a.createElement("div",{className:"double-bounce2"}))),e.error&&r.a.createElement("div",{className:"spinnerDiv"},r.a.createElement("div",{className:"spinnerText"},e.error)),r.a.createElement("div",{className:Object(g.a)(K.content,Object(l.a)({},K.contentShift,G))},r.a.createElement("div",{onClick:Q,className:K.drawerToggle},r.a.createElement(f.a,{onClick:Q},G?r.a.createElement(O.a,null):r.a.createElement(x.a,null))),r.a.createElement(s.a,{onClick:function(e){if(I){var t=[e.latlng.lat.toFixed(3),e.latlng.lng.toFixed(3)];if(console.log(t),0===E.length)b([t]);else if(1===E.length){var a=E[0];console.log(a,t),b([a,t])}else 2!==E.length||J?J&&M(!1):b([t])}},height:100,center:[o.lat,o.long],zoom:o.zoom},r.a.createElement(m.a,{style:{cursor:I&&"pointer !important"},attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),2===e.searchArea.length&&r.a.createElement(d.a,{color:"purple",bounds:e.searchArea}),e.cameras&&e.cameras.map((function(e){return r.a.createElement(p.a,{key:e.id,position:[e.lat,e.long],icon:e.hotspot?B:T},r.a.createElement(u.a,null,r.a.createElement("div",{className:K.tooltip},r.a.createElement("div",{id:"imageDiv",style:{display:"none"}},r.a.createElement("img",{onError:function(e){e.target.onError=null,e.target.src="/NoImage"},onLoad:V,src:"/image/".concat(e.id)})),r.a.createElement("div",null,r.a.createElement("strong",null,"ID: "),e.id),r.a.createElement("div",null,r.a.createElement("strong",null,"Name: "),e.name))))})))),r.a.createElement(j.a,{className:K.drawer,variant:"persistent",anchor:"right",open:G,classes:{paper:K.drawerPaper}},r.a.createElement("div",{className:K.drawerTitle},"Toolbar"),r.a.createElement("div",{className:K.drawerBody},r.a.createElement(y.a,{margin:"normal"},r.a.createElement(S.a,null,"Change Search Area"),r.a.createElement(N.a,{label:"Toggle Area Edit",control:r.a.createElement(k.a,{checked:I,onChange:function(e){R(!I)},name:"checkedA",inputProps:{"aria-label":"secondary checkbox"}})}),r.a.createElement(C.a,null,"Select two points to create new search rectangle"),r.a.createElement(A.a,{className:K.buttonGroup,row:!0},r.a.createElement(z.a,{onClick:function(){2===E.length&&(e.handleNewRectangle(E),b([]))},variant:"contained",color:"primary"},"Update"),r.a.createElement(z.a,{onClick:function(){b([]),e.handleReset()},variant:"contained"},"Clear")),r.a.createElement(A.a,null,r.a.createElement(z.a,{variant:"contained",color:"secondary",onClick:function(){try{var t=document.createElement("a"),a="";e.cameras.map((function(e){return a+=e.id+"\n"}));var n=new Blob([a],{type:"text/plain"});t.href=URL.createObjectURL(n),t.download="cameraList",t.click()}catch(r){console.log("Error Exporting Data")}}},"Export"))))))});var R=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(!0),l=Object(i.a)(c,2),s=l[0],m=l[1],d=Object(n.useState)([]),p=Object(i.a)(d,2),u=p[0],g=p[1];return Object(n.useEffect)((function(){return[fetch("/api").then((function(e){return e.json()})).then((function(e){console.log(e),o(e.cameraData),g(e.searchArea),m(!1)}))]}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(I,{cameras:a,searchArea:u,loading:s}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[55,1,2]]]);
//# sourceMappingURL=main.245da792.chunk.js.map